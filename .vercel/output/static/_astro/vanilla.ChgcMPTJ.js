"use strict";(()=>{var e="/svg",t=top.__vtbag?.elementCrossing;function s(){self.crossingStorage?self.crossingStorage.setItem("@vtbag/element-crossing",a()):top.sessionStorage.setItem("@vtbag/element-crossing",JSON.stringify(a()))}function n(){let t,s;(s=self.crossingStorage)?t=s.getItem("@vtbag/element-crossing")??[]:(s=top.sessionStorage,t=JSON.parse(s.getItem("@vtbag/element-crossing")??"[]")),top.sessionStorage.removeItem("@vtbag/element-crossing"),self.crossingStorage?.removeItem("@vtbag/element-crossing"),("navigation"in self&&"reload"!==self.navigation?.activation?.navigationType||1!==performance?.navigation?.type)&&function(t){t.forEach((t=>{let s=document.querySelector("#"+t.id+",[data-vtbag-x*='#"+t.id+"'],[data-vtbag-x*='id:"+t.id+"']");s&&t.specs.forEach((n=>{switch(n.kind){case"class":s.classList["true"===n.value?"add":"remove"](n.key);break;case"style":"length"===n.key||"parentRule"===n.key?console.error("[crossing]","Cannot assign to read-only property",n.key,"in",t.id):s.style.setProperty(n.key,n.value??"");break;case"prop":n.key.startsWith("data-")?s.dataset[n.key.substring(5)]=n.value:s[n.key]=n.value;break;case"bool":s[n.key]="true"===n.value;break;case"num":s[n.key]=parseFloat(n.value??"0");break;case"anim":if(n.key===e){if(!(s instanceof SVGSVGElement)){console.error("[crossing]",`restore: element for key ${n.key} is not an SVG element`,s);break}s.setCurrentTime(parseFloat(n.value??"0")+((new Date).getTime()-t.timestamp)/1e3)}else{let e=s.getAnimations().filter((e=>e instanceof CSSAnimation&&e.animationName===n.key));e.length>1&&console.warn("[crossing]",`restore: animation name ${n.key} is not unique for`,s),e.forEach((e=>e.currentTime=~~(n.value??"0")+((new Date).getTime()-t.timestamp)))}break;case"elem":if(top?.__vtbag?.elementCrossing?.fun){let e=self.crossingStorage.getItem(n.key);e&&(s.replaceWith(e),s=e)}break;default:console.error("[crossing]","unknown kind",n.kind)}}))}))}(t)}function a(){let s=new Set,n=[];return self.document.querySelectorAll("[data-vtbag-x]").forEach((a=>{let r=function(s){function n(e,s){let[n,a]=e.split(":",2);if(!n)return console.error("[crossing]","syntax error:",e,"is not recognized as a valid specification in",s),["<none>",a];if(void 0===a)switch(a=n.slice(1),n[0]){case"#":n="id";break;case".":n="class";break;case"@":n="prop";break;case"-":n="style";break;case"~":n="anim";break;case"&":if(n="elem",t?.fun)break;default:console.error("[crossing]","syntax error:",e,"is not recognized as a valid specification in",s)}return[n,a]}let a=s.id,r=[];if(s.getAttribute("data-vtbag-x")?.trim().split(/\s+/).forEach((t=>{let[i,o]=n(t,s);switch(i){case"id":a=o;break;case"class":r.push({kind:i,key:o,value:s.classList.contains(o)?"true":"false"});break;case"style":r.push({kind:i,key:o,value:""+(s.style[o]??"")});break;case"bool":case"num":case"prop":let t=o.startsWith("data-")?s.dataset[o.substring(5)]:s[o],n=typeof t;r.push({kind:"boolean"===n?"bool":"number"===n?"num":"prop",key:o,value:""+t});break;case"anim":if(o===e){if(!(s instanceof SVGSVGElement)){console.error("[crossing]",`retrieval: element is not an SVG element, but "${o}" was used for its key`,s);break}let e=s.getCurrentTime();e>0&&r.push({kind:i,key:o,value:e.toString()})}else{let e=s.getAnimations().filter((e=>e instanceof CSSAnimation&&e.animationName===o));e.length>1&&console.error("[crossing]",`retrieval: animation name ${o} is not unique for`,s),e.length>0&&r.push({kind:i,key:o,value:""+(e[0].currentTime??0)})}break;case"elem":top?.__vtbag?.elementCrossing?.fun&&(self.crossingStorage.setItem(o,s),r.push({kind:i,key:o}));break;default:console.error("[crossing]","unknown kind",i)}})),a)return{id:a,timestamp:(new Date).getTime(),specs:r};console.error("[crossing]","missing id in",s)}(a);r&&(s.has(r.id)&&console.error("[crossing]","non unique id",r.id),n.push(r),s.add(r.id))})),n}!function(){if(t?.fun){if(self===top)return;top.document.title=self.document.title,top.history.replaceState(self.history.state,"",self.location.href),self.crossingStorage=t.fun}document.addEventListener("astro:after-preparation",s),document.addEventListener("astro:after-swap",n),self.addEventListener("onpageswap"in self?"pageswap":"pagehide",s),self.addEventListener("onpagereveal"in self?"pagereveal":"DOMContentLoaded",n)}()})();