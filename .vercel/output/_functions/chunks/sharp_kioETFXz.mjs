import{A as t,M as i}from"./astro/server_Cr3L-o0H.mjs";import{b as e,p as a}from"./_astro_assets_Cenp1MQy.mjs";let o;const r={low:25,mid:50,high:80,max:100};const s={fill:"fill",contain:"inside",cover:"cover",none:"outside","scale-down":"inside",outside:"outside",inside:"inside"};var n={validateOptions:e.validateOptions,getURL:e.getURL,parseURL:e.parseURL,getHTMLAttributes:e.getHTMLAttributes,getSrcSet:e.getSrcSet,async transform(e,n,h){o||(o=await async function(){let e;try{e=(await import("sharp")).default}catch{throw new t(i)}return e.cache(!1),e}());const d=n;if("svg"===d.format)return{data:e,format:"svg"};const l=o(e,{failOnError:!1,pages:-1,limitInputPixels:h.service.config.limitInputPixels});l.rotate();const f=Boolean(d.fit);if(d.width&&d.height&&d.fit){const t=s[d.fit]??"inside";l.resize({width:Math.round(d.width),height:Math.round(d.height),fit:t,position:d.position,withoutEnlargement:f})}else d.height&&!d.width?l.resize({height:Math.round(d.height),withoutEnlargement:f}):d.width&&l.resize({width:Math.round(d.width),withoutEnlargement:f});if(d.format){let t;if(d.quality){const i=a(d.quality);t="number"==typeof i?i:d.quality in r?r[d.quality]:void 0}l.toFormat(d.format,{quality:t})}const{data:u,info:c}=await l.toBuffer({resolveWithObject:!0});return{data:u,format:c.format}}};export{n as default};
